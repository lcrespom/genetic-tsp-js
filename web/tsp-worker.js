!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,i){"use strict";function s(t,e){let i=[];for(let s=0;s<e;s++)i[s]=t instanceof Function?t():t;return i}function n(t){return Math.floor(Math.random()*t)}var o=i(1);class r{constructor(t){this.numCities=t,this.cityX=[],this.cityY=[],this.initCities(this.cityX,this.cityY),this.distances=s(()=>new Array,t);for(let e=0;e<t;e++)for(let i=0;i<t;i++)this.distances[e][i]=this.calcDistance(this.cityX[e],this.cityY[e],this.cityX[i],this.cityY[i])}getDistance(t,e){return this.distances[t][e]}initCities(t,e){if(this.numCities<100){let i,s=[];for(let o=0;o<this.numCities;o++){do{i=n(149)+1}while(s[i]);s[i]=!0,t[o]=20+i%15*40+n(10),e[o]=30+i/15*40+n(10)}}else{for(let i=0;i<this.numCities;i++)t[i]=640*Math.random(),e[i]=480*Math.random()}}calcDistance(t,e,i,s){let n=i-t,o=s-e;return Math.sqrt(n*n+o*o)}}class a extends o.b{constructor(t,e=!0){super(),this.map=t,this.eval=Number.NEGATIVE_INFINITY,this.flags=s(!1,t.numCities),e&&(this.cities=s(-1,t.numCities),this.permuteCities(),this.eval=this.calcTrip())}evaluate(){return this.eval}combine(t){let e=n(this.cities.length),i=t,s=this.combineLeft(e,this,i);s.eval=s.calcTrip();let o=[];return o.push(s),s=this.combineRight(e,this,i),s.eval=s.calcTrip(),o.push(s),o}equals(t){return this.eval==t.eval&&function(t,e){return t.length==e.length&&t.every((t,i)=>t===e[i])}(this.cities,t.cities)}invert(){let t=new a(this.map,!1);return t.cities=this.cities.slice(),t.cities.reverse(),t.eval=this.eval,t}permuteCities(){let t=[];for(let e=0;e<this.cities.length;e++)t[e]=e;for(let e=0;e<this.cities.length;e++){let i=this.cities.length-e,s=n(i);this.cities[e]=t[s],t[s]=t[i-1]}}combineLeft(t,e,i){let s=new a(this.map,!1);s.cities=e.cities.slice(),s.initFlags(e.cities,0,t);let n=t,o=0;for(;t<s.cities.length;){let e=i.cities[n];if(s.found(e,0,t)||(s.cities[t++]=e),++n>=i.cities.length&&(n=0),++o>i.cities.length)throw new Error("Could not combine")}return s}combineRight(t,e,i){let s=new a(this.map,!1);s.cities=e.cities.slice(),s.initFlags(e.cities,t,e.cities.length);let n=0,o=0;for(;o<t;){let e=i.cities[n];if(s.found(e,t,s.cities.length)||(s.cities[o++]=e),++n>i.cities.length)throw new Error("Could not combine")}return s}initFlags(t,e,i){for(let s=e;s<i;s++)this.flags[t[s]]=!0}found(t,e,i){return this.flags[t]}calcTrip(){let t=0;for(let e=0;e<this.cities.length-1;e++)t+=this.map.getDistance(this.cities[e],this.cities[e+1]);return t+=this.map.getDistance(this.cities[this.cities.length-1],this.cities[0])}}class l extends o.a{constructor(t){super(t),this.map=new r(t.numCities)}newSolution(){return new a(this.map)}}e.a=l},function(t,e,i){"use strict";class s{static compareTo(t,e){let i=t.evaluate(),s=e.evaluate();return i<s?-1:i>s?1:0}}e.b=s;class n{constructor(t){this.numSolutions=t.population,this.solutions=[],this.weights=[],this.weightExponent=t.weightExponent}add(t){this.solutions.push(t)}prepareForSelection(){this.solutions.sort(s.compareTo);let t=this.solutions[this.solutions.length-1].evaluate();this.totalWeight=0;for(let e=0;e<this.numSolutions;e++){let i=t-this.solutions[e].evaluate();1!=this.weightExponent&&(i=Math.pow(i,this.weightExponent)),this.totalWeight+=i,this.weights[e]=this.totalWeight}}select(){let t=Math.random()*this.totalWeight;for(let e=0;e<this.weights.length;e++)if(t<this.weights[e])return this.solutions[e];throw new Error("Invalid population state")}getIncumbent(){return this.solutions[0]}size(){return this.solutions.length}hasClone(t){for(let e=0;e<this.solutions.length;e++)if(t.equals(this.solutions[e]))return!0;return!1}copySolutions(t,e){t.solutions=this.solutions.slice(0,e)}}class o{constructor(t){this.stop=!1,this.params=t}run(){let t=0;for(this.generation=this.randomize(),this.generation.prepareForSelection();!this.stop;)this.step(),t++,this.fireStepEvent(this.generation,t)}setListener(t){this.listener=t}step(){let t=new n(this.params);for(this.copyElite(this.generation,t),this.generation=this.combine(this.generation,t);this.generation.size()<this.params.population;)this.generation.add(this.newSolution());this.generation.prepareForSelection()}copyElite(t,e){t.copySolutions(e,this.params.elite)}combine(t,e){let i=this.params.elite,s=0;for(;i<this.params.population&&s<2*this.params.population;){s++;let t=this.generation.select(),n=this.generation.select();if(t.equals(n))continue;Math.random()<this.params.invertRatio&&(t=t.invert());let o=t.combine(n);for(let t of o)e.hasClone(t)||(i<this.params.population&&e.add(t),i++)}return e}fireStepEvent(t,e){null!=this.listener&&this.listener.engineStep(t,e)}randomize(){let t=new n(this.params);for(let e=0;e<this.params.population;e++)t.add(this.newSolution());return t}}e.a=o},,,,,function(t,e,i){t.exports=i(7)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(0);let n=postMessage,o=0,r=0,a=Date.now(),l=0,h=0,c=0,u=0;self.onmessage=(t=>{switch(t.data.command){case"start":return function(t){let e=new s.a(t);e.setListener(p),o=Date.now(),e.run()}(t.data.params);default:throw Error("Unknown command: "+t.data.command)}});const p={engineStep(t,e){if(!function(t){let e=Date.now();return!(e-r<t||(r=e,0))}(250))return;let i=t.getIncumbent(),s=i.evaluate(),p=Date.now();s!=u&&(u=s,h=e,c=p-o);n({generation:e,gps:(e-l)/(p-a)*1e3,eval:s,lastIncumbentGen:h,elapsed:p-o,lastIncumbentWhen:c,incumbent:i}),l=e,a=p}}}]);